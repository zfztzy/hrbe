{"remainingRequest":"/Users/macbookpro/Documents/hr-manage/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/macbookpro/Documents/hr-manage/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/macbookpro/Documents/hr-manage/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/macbookpro/Documents/hr-manage/src/components/batchControl/BatchInput.vue.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macbookpro/Documents/hr-manage/src/components/batchControl/BatchInput.vue.vue","mtime":1649951429703},{"path":"/Users/macbookpro/Documents/hr-manage/babel.config.js","mtime":1609225489041},{"path":"/Users/macbookpro/Documents/hr-manage/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbookpro/Documents/hr-manage/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macbookpro/Documents/hr-manage/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbookpro/Documents/hr-manage/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvbWFjYm9va3Byby9Eb2N1bWVudHMvaHItbWFuYWdlL25vZGVfbW9kdWxlcy9fQGJhYmVsX3J1bnRpbWVANy4xNy4yQEBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgKiBhcyByZXF1ZXN0IGZyb20gIi4uLy4uL25ldHdvcmsvcmVxdWVzdCI7IC8vIGltcG9ydCBheGlvcyBmcm9tICdheGlvcycKLy8gaW1wb3J0IHJlcXdlc3QgZnJvbSAncmVxd2VzdCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGJhdGNoVHlwZTogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWxlTGlzdDogW10sCiAgICAgIHVwbG9hZGluZzogZmFsc2UsCiAgICAgIGV4Y2VsVHlwZTogJ0FwcGxpY2FudEluZm8nLAogICAgICBmaWxlTmFtZTogJycsCiAgICAgIGZpbGVQYXRoOiAnJywKICAgICAgaXNEaXNhYmxlZDogdHJ1ZSwKICAgICAgYmF0Y2hUeXBlTmFtZTogJycKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZSh2YWx1ZSkgewogICAgICB0aGlzLmlzRGlzYWJsZWQgPSBmYWxzZTsKICAgICAgdGhpcy5leGNlbFR5cGUgPSAiIi5jb25jYXQodmFsdWUpOwoKICAgICAgaWYgKHZhbHVlID09PSAnQXBwbGljYW50SW5mbycpIHsKICAgICAgICB0aGlzLmZpbGVOYW1lID0gJ+WAmemAieS6uuaooeeJiC54bHN4JzsKICAgICAgICB0aGlzLmJhdGNoVHlwZU5hbWUgPSAn5YCZ6YCJ5Lq6JzsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ1Byb2plY3RJbmZvJykgewogICAgICAgIHRoaXMuZmlsZU5hbWUgPSAn6aG555uu5L+h5oGv5qih54mILnhsc3gnOwogICAgICAgIHRoaXMuYmF0Y2hUeXBlTmFtZSA9ICfpobnnm67kv6Hmga8nOwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnUHJvamVjdFN0YXR1c0luZm8nKSB7CiAgICAgICAgdGhpcy5maWxlTmFtZSA9ICfpobnnm67mu6HotrPluqbmqKHniYgueGxzeCc7CiAgICAgICAgdGhpcy5iYXRjaFR5cGVOYW1lID0gJ+mhueebrua7oei2s+W6pic7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdSZWNydWl0bWVudEluZm8nKSB7CiAgICAgICAgdGhpcy5maWxlTmFtZSA9ICfmi5vogZjpnIDmsYLmqKHniYgueGxzeCc7CiAgICAgICAgdGhpcy5iYXRjaFR5cGVOYW1lID0gJ+aLm+iBmOmcgOaxgic7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlKSB7CiAgICAgIHZhciBpbmRleCA9IHRoaXMuZmlsZUxpc3QuaW5kZXhPZihmaWxlKTsKICAgICAgdmFyIG5ld0ZpbGVMaXN0ID0gdGhpcy5maWxlTGlzdC5zbGljZSgpOwogICAgICBuZXdGaWxlTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLmZpbGVMaXN0ID0gbmV3RmlsZUxpc3Q7CiAgICB9LAogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmZpbGVMaXN0KSwgW2ZpbGVdKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGhhbmRsZVVwbG9hZDogZnVuY3Rpb24gaGFuZGxlVXBsb2FkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2codGhpcyk7IC8vIGNvbnN0IHsgZmlsZUxpc3QgfSA9IHRoaXM7CgogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgdGhpcy5maWxlTGlzdFswXSk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndHlwZScsIHRoaXMuZXhjZWxUeXBlKTsKICAgICAgdGhpcy51cGxvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIKICAgICAgICB9CiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKGNvbmZpZyk7IC8vIGF4aW9zLnBvc3QoImh0dHA6Ly8xMzkuOS4xNjAuMjQvc2F2ZV9leGNlbC8iLCBmb3JtRGF0YSwgY29uZmlnKTsKCiAgICAgIHJlcXVlc3QucmVxdWVzdCh7CiAgICAgICAgdXJsOiB0aGlzLmdldEJhc2VVcmwoKSArICdzYXZlX2V4Y2VsLycsCiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgZGF0YTogZm9ybURhdGEsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICBhbGVydChyZXMuZGF0YS5tc2cpOwogICAgICAgIF90aGlzLnVwbG9hZGluZyA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgZG93bmxvYWRNb2RlbDogZnVuY3Rpb24gZG93bmxvYWRNb2RlbCgpIHsKICAgICAgd2luZG93Lm9wZW4odGhpcy5maWxlUGF0aCArIHRoaXMuZmlsZU5hbWUpOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmhhbmRsZUNoYW5nZSh0aGlzLmJhdGNoVHlwZSk7CiAgICB0aGlzLmZpbGVQYXRoID0gdGhpcy5nZXRCYXNlVXJsKCkgKyAnc3RhdGljL21vZGVsLyc7CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,iD,CACA;AACA;;AACA;AACAA;AACAC;AACAC;AADA;AADA,GADA;AAMAC,MANA,kBAMA;AACA;AACAC,kBADA;AAEAC,sBAFA;AAGAC,gCAHA;AAIAC,kBAJA;AAKAC,kBALA;AAMAC,sBANA;AAOAC;AAPA;AASA,GAhBA;AAiBAC;AACAC,gBADA,wBACAC,KADA,EACA;AACA;AACA;;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KAjBA;AAkBAC,gBAlBA,wBAkBAC,IAlBA,EAkBA;AACA;AACA;AACAC;AACA;AACA,KAvBA;AAwBAC,gBAxBA,wBAwBAF,IAxBA,EAwBA;AACA;AACA;AACA,KA3BA;AA4BAG,gBA5BA,0BA4BA;AAAA;;AACAC,wBADA,CAEA;;AACA;AACAC;AACAA;AACA;AACA;AACAC;AAAA;AAAA;AADA;AAGAF,0BAVA,CAWA;;AACAG;AACAC,8CADA;AAEAC,sBAFA;AAGArB,sBAHA;AAIAkB;AAAA;AAAA;AAJA,SAKAI,IALA,CAKA;AACAN;AACAO;AACA;AACA,OATA,EASAC,KATA,CASA;AACAR;AACA,OAXA;AAYA,KApDA;AAqDAS,iBArDA,2BAqDA;AACAC;AACA,KAvDA;AAwDAC,SAxDA,mBAwDA;AACA;AACA;AA1DA,GAjBA;AA6EAC,SA7EA,qBA6EA;AACA;AACA;AACA;AAhFA","names":["props","batchType","type","data","fileList","uploading","excelType","fileName","filePath","isDisabled","batchTypeName","methods","handleChange","value","handleRemove","file","newFileList","beforeUpload","handleUpload","console","formData","headers","request","url","method","then","alert","catch","downloadModel","window","close","created"],"sourceRoot":"src/components/batchControl","sources":["BatchInput.vue.vue"],"sourcesContent":["<template>\n  <div class=\"clearfix\">\n    <h2 class=\"typeChoiceTitle\">{{batchTypeName}}-批量导入</h2>\n     <!-- <a-select placeholder=\"选择导入表格类型\" style=\"width: 400px\" @change=\"handleChange\" :defaultValue=\"batchType\" class=\"typeChoice\">\n      <a-select-option value=\"ApplicantInfo\">\n        候选人管理\n      </a-select-option>\n      <a-select-option value=\"ProjectInfo\">\n        项目信息\n      </a-select-option>\n      <a-select-option value=\"ProjectStatusInfo\">\n        项目满足度\n      </a-select-option>\n      <a-select-option value=\"RecruitmentInfo\">\n        招聘需求\n      </a-select-option>\n    </a-select> -->\n    <div class=\"fileDownload\">\n      <p v-if=\"isDisabled\" style=\"color:red;\">请选择下载模版</p>\n      <a-button :disabled=\"isDisabled\" @click=\"downloadModel\">下载{{fileName}}</a-button>\n    </div>\n    <a-upload :fileList=\"fileList\" :remove=\"handleRemove\" :beforeUpload=\"beforeUpload\" class=\"fileChoice\">\n      <a-button> <a-icon type=\"upload\" /> 选择导入文件 </a-button>\n    </a-upload>\n    <a-button\n      type=\"primary\"\n      @click=\"handleUpload\"\n      :disabled=\"fileList.length === 0\"\n      :loading=\"uploading\"\n      style=\"\n        position: absolute;\n        bottom: 50px;\n        right: 170px;\"\n    >\n      {{ uploading ? 'Uploading' : 'Start Upload' }}\n    </a-button>\n    <a-button class=\"batchInCancel\" @click=\"close\">取消</a-button>\n  </div>\n</template>\n<script>\nimport * as request from \"../../network/request\"\n// import axios from 'axios'\n// import reqwest from 'reqwest';\nexport default {\n  props: {\n    batchType: {\n      type: String\n    }\n  },\n  data() {\n    return {\n      fileList: [],\n      uploading: false,\n      excelType: 'ApplicantInfo',\n      fileName: '',\n      filePath:'',\n      isDisabled: true,\n      batchTypeName: ''\n    };\n  },\n  methods: {\n    handleChange(value) {\n      this.isDisabled = false\n      this.excelType = `${value}`;\n      if (value === 'ApplicantInfo') {\n        this.fileName = '候选人模版.xlsx'\n        this.batchTypeName = '候选人'\n      } else if (value === 'ProjectInfo') {\n        this.fileName = '项目信息模版.xlsx'    \n        this.batchTypeName = '项目信息'    \n      } else if (value === 'ProjectStatusInfo') {\n        this.fileName = '项目满足度模版.xlsx'  \n        this.batchTypeName = '项目满足度'      \n      } else if (value === 'RecruitmentInfo') {\n        this.fileName = '招聘需求模版.xlsx'  \n        this.batchTypeName = '招聘需求'      \n      }\n    },\n    handleRemove(file) {\n      const index = this.fileList.indexOf(file);\n      const newFileList = this.fileList.slice();\n      newFileList.splice(index, 1);\n      this.fileList = newFileList;\n    },\n    beforeUpload(file) {\n      this.fileList = [...this.fileList, file];\n      return false;\n    },\n    handleUpload() {\n      console.log(this);\n      // const { fileList } = this;\n      const formData = new FormData();\n      formData.append('file',this.fileList[0]);\n      formData.append('type',this.excelType);\n      this.uploading = true;\n      let config = {\n        headers: { \"Content-Type\": \"multipart/form-data\" }\n      };\n      console.log(config);\n      // axios.post(\"http://139.9.160.24/save_excel/\", formData, config);\n      request.request({\n      url: this.getBaseUrl() + 'save_excel/',\n      method: 'post',\n      data: formData,\n      headers: { \"Content-Type\": \"multipart/form-data\" }\n      }).then(res =>{\n        console.log(res);\n        alert(res.data.msg)\n        this.uploading = false;\n      }).catch(err =>{\n        console.log(err);\n      })\n    },\n    downloadModel(){\n      window.open(this.filePath + this.fileName)\n    },\n    close () {\n      this.$emit('close')\n    }\n  },\n  created () {\n    this.handleChange(this.batchType)\n    this.filePath = this.getBaseUrl() + 'static/model/'\n  }\n};\n</script>\n\n<style>\n\n.bottomUpload{\n    position: absolute;\n    bottom: 50px;\n    right: 50px;\n}\n\n.fileChoice{\n    position: absolute;\n    top: 305px;\n    left: 50px;\n}\n\n.fileDownload{\n    position: absolute;\n    top: 180px;\n    left: 50px;\n}\n\n.typeChoice{\n    position: absolute;\n    top: 80px;\n    left: 50px;\n}\n\n.typeChoiceTitle{\n    position: absolute;\n    top: 30px;\n    left: 50px;\n}\n\n.batchInCancel {\n  position: absolute;\n  bottom: 50px;\n  right: 50px;\n}\n\n</style>"]}]}