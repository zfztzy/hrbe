{"remainingRequest":"/Users/macbookpro/Documents/hr-manage/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/macbookpro/Documents/hr-manage/src/components/batchControl/BatchInput.vue.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macbookpro/Documents/hr-manage/src/components/batchControl/BatchInput.vue.vue","mtime":1649951429703},{"path":"/Users/macbookpro/Documents/hr-manage/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macbookpro/Documents/hr-manage/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbookpro/Documents/hr-manage/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIHJlcXVlc3QgZnJvbSAiLi4vLi4vbmV0d29yay9yZXF1ZXN0IgovLyBpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCi8vIGltcG9ydCByZXF3ZXN0IGZyb20gJ3JlcXdlc3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGJhdGNoVHlwZTogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWxlTGlzdDogW10sCiAgICAgIHVwbG9hZGluZzogZmFsc2UsCiAgICAgIGV4Y2VsVHlwZTogJ0FwcGxpY2FudEluZm8nLAogICAgICBmaWxlTmFtZTogJycsCiAgICAgIGZpbGVQYXRoOicnLAogICAgICBpc0Rpc2FibGVkOiB0cnVlLAogICAgICBiYXRjaFR5cGVOYW1lOiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUNoYW5nZSh2YWx1ZSkgewogICAgICB0aGlzLmlzRGlzYWJsZWQgPSBmYWxzZQogICAgICB0aGlzLmV4Y2VsVHlwZSA9IGAke3ZhbHVlfWA7CiAgICAgIGlmICh2YWx1ZSA9PT0gJ0FwcGxpY2FudEluZm8nKSB7CiAgICAgICAgdGhpcy5maWxlTmFtZSA9ICflgJnpgInkurrmqKHniYgueGxzeCcKICAgICAgICB0aGlzLmJhdGNoVHlwZU5hbWUgPSAn5YCZ6YCJ5Lq6JwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnUHJvamVjdEluZm8nKSB7CiAgICAgICAgdGhpcy5maWxlTmFtZSA9ICfpobnnm67kv6Hmga/mqKHniYgueGxzeCcgICAgCiAgICAgICAgdGhpcy5iYXRjaFR5cGVOYW1lID0gJ+mhueebruS/oeaBrycgICAgCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdQcm9qZWN0U3RhdHVzSW5mbycpIHsKICAgICAgICB0aGlzLmZpbGVOYW1lID0gJ+mhueebrua7oei2s+W6puaooeeJiC54bHN4JyAgCiAgICAgICAgdGhpcy5iYXRjaFR5cGVOYW1lID0gJ+mhueebrua7oei2s+W6picgICAgICAKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ1JlY3J1aXRtZW50SW5mbycpIHsKICAgICAgICB0aGlzLmZpbGVOYW1lID0gJ+aLm+iBmOmcgOaxguaooeeJiC54bHN4JyAgCiAgICAgICAgdGhpcy5iYXRjaFR5cGVOYW1lID0gJ+aLm+iBmOmcgOaxgicgICAgICAKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVJlbW92ZShmaWxlKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maWxlTGlzdC5pbmRleE9mKGZpbGUpOwogICAgICBjb25zdCBuZXdGaWxlTGlzdCA9IHRoaXMuZmlsZUxpc3Quc2xpY2UoKTsKICAgICAgbmV3RmlsZUxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy5maWxlTGlzdCA9IG5ld0ZpbGVMaXN0OwogICAgfSwKICAgIGJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbLi4udGhpcy5maWxlTGlzdCwgZmlsZV07CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVVcGxvYWQoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMpOwogICAgICAvLyBjb25zdCB7IGZpbGVMaXN0IH0gPSB0aGlzOwogICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLHRoaXMuZmlsZUxpc3RbMF0pOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3R5cGUnLHRoaXMuZXhjZWxUeXBlKTsKICAgICAgdGhpcy51cGxvYWRpbmcgPSB0cnVlOwogICAgICBsZXQgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIiB9CiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKGNvbmZpZyk7CiAgICAgIC8vIGF4aW9zLnBvc3QoImh0dHA6Ly8xMzkuOS4xNjAuMjQvc2F2ZV9leGNlbC8iLCBmb3JtRGF0YSwgY29uZmlnKTsKICAgICAgcmVxdWVzdC5yZXF1ZXN0KHsKICAgICAgdXJsOiB0aGlzLmdldEJhc2VVcmwoKSArICdzYXZlX2V4Y2VsLycsCiAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICBkYXRhOiBmb3JtRGF0YSwKICAgICAgaGVhZGVyczogeyAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiIH0KICAgICAgfSkudGhlbihyZXMgPT57CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICBhbGVydChyZXMuZGF0YS5tc2cpCiAgICAgICAgdGhpcy51cGxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZXJyID0+ewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pCiAgICB9LAogICAgZG93bmxvYWRNb2RlbCgpewogICAgICB3aW5kb3cub3Blbih0aGlzLmZpbGVQYXRoICsgdGhpcy5maWxlTmFtZSkKICAgIH0sCiAgICBjbG9zZSAoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJykKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5oYW5kbGVDaGFuZ2UodGhpcy5iYXRjaFR5cGUpCiAgICB0aGlzLmZpbGVQYXRoID0gdGhpcy5nZXRCYXNlVXJsKCkgKyAnc3RhdGljL21vZGVsLycKICB9Cn07Cg=="},{"version":3,"sources":["BatchInput.vue.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BatchInput.vue.vue","sourceRoot":"src/components/batchControl","sourcesContent":["<template>\n  <div class=\"clearfix\">\n    <h2 class=\"typeChoiceTitle\">{{batchTypeName}}-批量导入</h2>\n     <!-- <a-select placeholder=\"选择导入表格类型\" style=\"width: 400px\" @change=\"handleChange\" :defaultValue=\"batchType\" class=\"typeChoice\">\n      <a-select-option value=\"ApplicantInfo\">\n        候选人管理\n      </a-select-option>\n      <a-select-option value=\"ProjectInfo\">\n        项目信息\n      </a-select-option>\n      <a-select-option value=\"ProjectStatusInfo\">\n        项目满足度\n      </a-select-option>\n      <a-select-option value=\"RecruitmentInfo\">\n        招聘需求\n      </a-select-option>\n    </a-select> -->\n    <div class=\"fileDownload\">\n      <p v-if=\"isDisabled\" style=\"color:red;\">请选择下载模版</p>\n      <a-button :disabled=\"isDisabled\" @click=\"downloadModel\">下载{{fileName}}</a-button>\n    </div>\n    <a-upload :fileList=\"fileList\" :remove=\"handleRemove\" :beforeUpload=\"beforeUpload\" class=\"fileChoice\">\n      <a-button> <a-icon type=\"upload\" /> 选择导入文件 </a-button>\n    </a-upload>\n    <a-button\n      type=\"primary\"\n      @click=\"handleUpload\"\n      :disabled=\"fileList.length === 0\"\n      :loading=\"uploading\"\n      style=\"\n        position: absolute;\n        bottom: 50px;\n        right: 170px;\"\n    >\n      {{ uploading ? 'Uploading' : 'Start Upload' }}\n    </a-button>\n    <a-button class=\"batchInCancel\" @click=\"close\">取消</a-button>\n  </div>\n</template>\n<script>\nimport * as request from \"../../network/request\"\n// import axios from 'axios'\n// import reqwest from 'reqwest';\nexport default {\n  props: {\n    batchType: {\n      type: String\n    }\n  },\n  data() {\n    return {\n      fileList: [],\n      uploading: false,\n      excelType: 'ApplicantInfo',\n      fileName: '',\n      filePath:'',\n      isDisabled: true,\n      batchTypeName: ''\n    };\n  },\n  methods: {\n    handleChange(value) {\n      this.isDisabled = false\n      this.excelType = `${value}`;\n      if (value === 'ApplicantInfo') {\n        this.fileName = '候选人模版.xlsx'\n        this.batchTypeName = '候选人'\n      } else if (value === 'ProjectInfo') {\n        this.fileName = '项目信息模版.xlsx'    \n        this.batchTypeName = '项目信息'    \n      } else if (value === 'ProjectStatusInfo') {\n        this.fileName = '项目满足度模版.xlsx'  \n        this.batchTypeName = '项目满足度'      \n      } else if (value === 'RecruitmentInfo') {\n        this.fileName = '招聘需求模版.xlsx'  \n        this.batchTypeName = '招聘需求'      \n      }\n    },\n    handleRemove(file) {\n      const index = this.fileList.indexOf(file);\n      const newFileList = this.fileList.slice();\n      newFileList.splice(index, 1);\n      this.fileList = newFileList;\n    },\n    beforeUpload(file) {\n      this.fileList = [...this.fileList, file];\n      return false;\n    },\n    handleUpload() {\n      console.log(this);\n      // const { fileList } = this;\n      const formData = new FormData();\n      formData.append('file',this.fileList[0]);\n      formData.append('type',this.excelType);\n      this.uploading = true;\n      let config = {\n        headers: { \"Content-Type\": \"multipart/form-data\" }\n      };\n      console.log(config);\n      // axios.post(\"http://139.9.160.24/save_excel/\", formData, config);\n      request.request({\n      url: this.getBaseUrl() + 'save_excel/',\n      method: 'post',\n      data: formData,\n      headers: { \"Content-Type\": \"multipart/form-data\" }\n      }).then(res =>{\n        console.log(res);\n        alert(res.data.msg)\n        this.uploading = false;\n      }).catch(err =>{\n        console.log(err);\n      })\n    },\n    downloadModel(){\n      window.open(this.filePath + this.fileName)\n    },\n    close () {\n      this.$emit('close')\n    }\n  },\n  created () {\n    this.handleChange(this.batchType)\n    this.filePath = this.getBaseUrl() + 'static/model/'\n  }\n};\n</script>\n\n<style>\n\n.bottomUpload{\n    position: absolute;\n    bottom: 50px;\n    right: 50px;\n}\n\n.fileChoice{\n    position: absolute;\n    top: 305px;\n    left: 50px;\n}\n\n.fileDownload{\n    position: absolute;\n    top: 180px;\n    left: 50px;\n}\n\n.typeChoice{\n    position: absolute;\n    top: 80px;\n    left: 50px;\n}\n\n.typeChoiceTitle{\n    position: absolute;\n    top: 30px;\n    left: 50px;\n}\n\n.batchInCancel {\n  position: absolute;\n  bottom: 50px;\n  right: 50px;\n}\n\n</style>"]}]}