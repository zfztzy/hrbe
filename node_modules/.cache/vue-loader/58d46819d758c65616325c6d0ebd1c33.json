{"remainingRequest":"/Users/macbookpro/Documents/hr-manage/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/macbookpro/Documents/hr-manage/src/components/batchControl/BatchInput.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macbookpro/Documents/hr-manage/src/components/batchControl/BatchInput.vue","mtime":1646980792468},{"path":"/Users/macbookpro/Documents/hr-manage/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macbookpro/Documents/hr-manage/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbookpro/Documents/hr-manage/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIHJlcXVlc3QgZnJvbSAiLi4vLi4vbmV0d29yay9yZXF1ZXN0IgovLyBpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCi8vIGltcG9ydCByZXF3ZXN0IGZyb20gJ3JlcXdlc3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgdXBsb2FkaW5nOiBmYWxzZSwKICAgICAgZXhjZWxUeXBlOiAnQXBwbGljYW50SW5mbycsCiAgICAgIGZpbGVOYW1lOiAnJywKICAgICAgZmlsZVBhdGg6J2h0dHA6Ly8xMzkuOS4xNjAuMjQvc3RhdGljL21vZGVsLycsCiAgICAgIGlzRGlzYWJsZWQ6IHRydWUKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaGFuZ2UodmFsdWUpIHsKICAgICAgdGhpcy5pc0Rpc2FibGVkID0gZmFsc2UKICAgICAgdGhpcy5leGNlbFR5cGUgPSBgJHt2YWx1ZX1gOwogICAgICBpZiAodmFsdWUgPT09ICdBcHBsaWNhbnRJbmZvJykgewogICAgICAgIHRoaXMuZmlsZU5hbWUgPSAn5YCZ6YCJ5Lq65qih54mILnhsc3gnCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdQcm9qZWN0SW5mbycpIHsKICAgICAgICB0aGlzLmZpbGVOYW1lID0gJ+mhueebruS/oeaBr+aooeeJiC54bHN4JyAgICAgICAgCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdQcm9qZWN0U3RhdHVzSW5mbycpIHsKICAgICAgICB0aGlzLmZpbGVOYW1lID0gJ+mhueebrua7oei2s+W6puaooeeJiC54bHN4JyAgICAgICAgCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdSZWNydWl0bWVudEluZm8nKSB7CiAgICAgICAgdGhpcy5maWxlTmFtZSA9ICfmi5vogZjpnIDmsYLmqKHniYgueGxzeCcgICAgICAgIAogICAgICB9CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlKGZpbGUpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbGVMaXN0LmluZGV4T2YoZmlsZSk7CiAgICAgIGNvbnN0IG5ld0ZpbGVMaXN0ID0gdGhpcy5maWxlTGlzdC5zbGljZSgpOwogICAgICBuZXdGaWxlTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLmZpbGVMaXN0ID0gbmV3RmlsZUxpc3Q7CiAgICB9LAogICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdGhpcy5maWxlTGlzdCA9IFsuLi50aGlzLmZpbGVMaXN0LCBmaWxlXTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGhhbmRsZVVwbG9hZCgpIHsKICAgICAgY29uc29sZS5sb2codGhpcyk7CiAgICAgIC8vIGNvbnN0IHsgZmlsZUxpc3QgfSA9IHRoaXM7CiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsdGhpcy5maWxlTGlzdFswXSk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndHlwZScsdGhpcy5leGNlbFR5cGUpOwogICAgICB0aGlzLnVwbG9hZGluZyA9IHRydWU7CiAgICAgIGxldCBjb25maWcgPSB7CiAgICAgICAgaGVhZGVyczogeyAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiIH0KICAgICAgfTsKICAgICAgY29uc29sZS5sb2coY29uZmlnKTsKICAgICAgLy8gYXhpb3MucG9zdCgiaHR0cDovLzEzOS45LjE2MC4yNC9zYXZlX2V4Y2VsLyIsIGZvcm1EYXRhLCBjb25maWcpOwogICAgICByZXF1ZXN0LnJlcXVlc3QoewogICAgICB1cmw6J2h0dHA6Ly8xMzkuOS4xNjAuMjQvc2F2ZV9leGNlbC8nLAogICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgZGF0YTogZm9ybURhdGEsCiAgICAgIGhlYWRlcnM6IHsgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIiB9CiAgICAgIH0pLnRoZW4ocmVzID0+ewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgYWxlcnQocmVzLmRhdGEubXNnKQogICAgICAgIHRoaXMudXBsb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGVyciA9PnsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KQogICAgfSwKICAgIGRvd25sb2FkTW9kZWwoKXsKICAgICAgd2luZG93Lm9wZW4odGhpcy5maWxlUGF0aCArIHRoaXMuZmlsZU5hbWUpCiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["BatchInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BatchInput.vue","sourceRoot":"src/components/batchControl","sourcesContent":["<template>\n  <div class=\"clearfix\">\n     <a-select placeholder=\"选择导入表格类型\" style=\"width: 400px\" @change=\"handleChange\" class=\"typeChoice\">\n      <a-select-option value=\"ApplicantInfo\">\n        候选人管理\n      </a-select-option>\n      <a-select-option value=\"ProjectInfo\">\n        项目信息\n      </a-select-option>\n      <a-select-option value=\"ProjectStatusInfo\">\n        项目满足度\n      </a-select-option>\n      <a-select-option value=\"RecruitmentInfo\">\n        招聘需求\n      </a-select-option>\n    </a-select>\n    <div class=\"fileDownload\">\n      <p v-if=\"isDisabled\" style=\"color:red;\">请选择下载模版</p>\n      <a-button :disabled=\"isDisabled\" @click=\"downloadModel\">下载{{fileName}}</a-button>\n    </div>\n    <a-upload :fileList=\"fileList\" :remove=\"handleRemove\" :beforeUpload=\"beforeUpload\" class=\"fileChoice\">\n      <a-button> <a-icon type=\"upload\" /> 选择导入文件 </a-button>\n    </a-upload>\n    <a-button\n      type=\"primary\"\n      @click=\"handleUpload\"\n      :disabled=\"fileList.length === 0\"\n      :loading=\"uploading\"\n      style=\"\n        position: absolute;\n        bottom: 50px;\n        right: 50px;\"\n    >\n      {{ uploading ? 'Uploading' : 'Start Upload' }}\n    </a-button>\n  </div>\n</template>\n<script>\nimport * as request from \"../../network/request\"\n// import axios from 'axios'\n// import reqwest from 'reqwest';\nexport default {\n  data() {\n    return {\n      fileList: [],\n      uploading: false,\n      excelType: 'ApplicantInfo',\n      fileName: '',\n      filePath:'http://139.9.160.24/static/model/',\n      isDisabled: true\n    };\n  },\n  methods: {\n    handleChange(value) {\n      this.isDisabled = false\n      this.excelType = `${value}`;\n      if (value === 'ApplicantInfo') {\n        this.fileName = '候选人模版.xlsx'\n      } else if (value === 'ProjectInfo') {\n        this.fileName = '项目信息模版.xlsx'        \n      } else if (value === 'ProjectStatusInfo') {\n        this.fileName = '项目满足度模版.xlsx'        \n      } else if (value === 'RecruitmentInfo') {\n        this.fileName = '招聘需求模版.xlsx'        \n      }\n    },\n    handleRemove(file) {\n      const index = this.fileList.indexOf(file);\n      const newFileList = this.fileList.slice();\n      newFileList.splice(index, 1);\n      this.fileList = newFileList;\n    },\n    beforeUpload(file) {\n      this.fileList = [...this.fileList, file];\n      return false;\n    },\n    handleUpload() {\n      console.log(this);\n      // const { fileList } = this;\n      const formData = new FormData();\n      formData.append('file',this.fileList[0]);\n      formData.append('type',this.excelType);\n      this.uploading = true;\n      let config = {\n        headers: { \"Content-Type\": \"multipart/form-data\" }\n      };\n      console.log(config);\n      // axios.post(\"http://139.9.160.24/save_excel/\", formData, config);\n      request.request({\n      url:'http://139.9.160.24/save_excel/',\n      method: 'post',\n      data: formData,\n      headers: { \"Content-Type\": \"multipart/form-data\" }\n      }).then(res =>{\n        console.log(res);\n        alert(res.data.msg)\n        this.uploading = false;\n      }).catch(err =>{\n        console.log(err);\n      })\n    },\n    downloadModel(){\n      window.open(this.filePath + this.fileName)\n    }\n  },\n};\n</script>\n\n<style>\n\n.bottomUpload{\n    position: absolute;\n    bottom: 50px;\n    right: 50px;\n}\n\n.fileChoice{\n    position: absolute;\n    top: 275px;\n    left: 50px;\n}\n\n.fileDownload{\n    position: absolute;\n    top: 150px;\n    left: 50px;\n}\n\n.typeChoice{\n    position: absolute;\n    top: 50px;\n    left: 50px;\n}\n\n</style>"]}]}